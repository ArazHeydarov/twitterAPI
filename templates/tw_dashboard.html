{% extends "base.html" %}
{% block content %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(function(){
        $('td').click(function(){
            $(this).find(':checkbox').click();
        });

        $(":checkbox").click(function(e) {
             e.stopPropagation();
        });
    });
    </script>


    <h2 style="margin-top: 20px; margin-bottom: 5px">Currently you have {{ followers.count }} follower</h2>
    <h2 style="margin: 0">If it's not the case please click the refresh your followers button below</h2>
    <h3 style="margin-top: 0; margin-bottom: 20px">This process may take a while</h3>
    <a class="btn btn-primary btn-lg" style="width: 150px; height:50px; padding-top: 15px;" href="{% url 'twitter_followers_update' %}" role="button">
        <p style="text-align: center">Update followers</p>
    </a>
    {% if followers %}
    <form method="post">
    {% csrf_token %}
    <table style="width:100%">
    <tr>
    {% for follower in followers %}
        <td>
            <img src="{{ follower.pp_url|slice:":-11" }}.jpg" width="100px" height="100px"
                 style="vertical-align: baseline">
            <label>{{ follower.name }} - {{ follower.username }}<br>
                Last tweet: {{ follower.last_tweet_dt }} <br>
                Last like: {{ follower.last_like_dt }} <br>
            <input type="checkbox" name="uid_{{ follower.id }}">
            </label>

        </td>
        {% if forloop.counter|divisibleby:2 %}
            </tr><tr>
        {% endif %}
    {% endfor %}
    </tr>
    </table>
    <label style="margin-top: 50px"><input type="submit" value="Remove followers"></label>
    </form>
    {% endif %}
{% endblock content %}

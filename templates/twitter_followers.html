{% extends "base.html" %}
{% block content %}

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(function(){
        $('td').click(function(){
            $(this).find(':checkbox').click();
        });

        $(":checkbox").click(function(e) {
             e.stopPropagation();
        });
    });
    </script>


    <h2 style="margin-top: 20px; margin-bottom: 5px">Currently you have {{ followers.count }} follower</h2>
    <h2 style="margin: 0">If it's not the case please click the refresh your followers button below</h2>
    <h3 style="margin-top: 0; margin-bottom: 20px">This process may take a while</h3>
    <form method="post">
    {% csrf_token %}
    <table style="width:100%">
    <tr>
    {% for follower in followers %}
        <td>
            <img src="{{ follower.pp_url|slice:":-11" }}.jpg" width="100px" height="100px"
                 style="vertical-align: baseline">
            <label>{{ follower.name }} - {{ follower.username }}<br>
                Last tweet: {{ follower.last_tweet_dt }} <br>
                Last like: {{ follower.last_like_dt }} <br>
            <input type="checkbox" name="uid_{{ follower.id }}">
            </label>

        </td>
        {% if forloop.counter|divisibleby:2 %}
            </tr><tr>
        {% endif %}
    {% endfor %}
    </tr>
    </table>
    <label style="margin-top: 50px"><input type="submit" value="Remove followers"></label>
    </form>
{% endblock content %}
